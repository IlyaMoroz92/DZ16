<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DZ16</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
    <script src="/js/script.js"></script>
    
</head>
<body onload="draw()">
    <canvas id="canvas" width = '400px' height = '400px'></canvas>
    <current-kurs></current-kurs>


    <script>
        let today = dayjs().format().slice(0, 10)
        let yesterday = dayjs().subtract(1, 'day').format().slice(0, 10)
    class Kurs extends HTMLElement { 

    connectedCallback() {
        
        function getKurs() {

        fetch(`https://www.nbrb.by/api/exrates/rates/dynamics/451?startdate=${yesterday}&enddate=${today}`)
        .then((response) => response.json()) 
        .then(function aaa(json) {  
        for(let i=0; i<json.length; i++) {
        createTr(`${json[i].Date.slice(0,10)}: 1 EUR `, `${json[i].Cur_OfficialRate} BYN`)
        }
        })

        fetch(`https://www.nbrb.by/api/exrates/rates/dynamics/431?startdate=${yesterday}&enddate=${today}`)
        .then((response) => response.json()) 
        .then(function aaa(json) {  
        for( let j=0; j<json.length; j++) {
        createTr(`${json[j].Date.slice(0,10)}: 1 USD `, `${json[j].Cur_OfficialRate} BYN`)
        }
        })

        fetch(`https://www.nbrb.by/api/exrates/rates/dynamics/456?startdate=${yesterday}&enddate=${today}`)
        .then((response) => response.json()) 
        .then(function aaa(json) {  
        for( let j=0; j<json.length; j++) {
        createTr(`${json[j].Date.slice(0,10)}: 100 RUS `, `${json[j].Cur_OfficialRate} BYN`)
        }
        })
    }
    getKurs()

    function createTr (el1, el2) {
        const body = document.querySelector('body');
        const div = document.createElement('div');
        const table = document.createElement('table');
        const tr = document.createElement('tr');
        const td1 = document.createElement('td');
        const td2 = document.createElement('td');

        td1.innerText = el1;
        td2.innerText = el2;
        tr.appendChild(td1);
        tr.appendChild(td2);

        table.appendChild(tr);
        div.appendChild(table);
        body.appendChild(table);
        }
    }
    }

    customElements.define("current-kurs", Kurs);

    function draw() {
let canvas = document.getElementById("canvas");
if (canvas.getContext) {
  const ctx = canvas.getContext("2d");
  ctx.globalAlpha = 0.95;
  ctx.shadowColor = '#008B8B';
  ctx.shadowBlur = 40;
  ctx.rotate(-45 * Math.PI / 180);
  ctx.translate(-200, 100);
  ctx.fillStyle = "#191970";
  ctx.font = 'italic bold 70px  fangsong cursive';
  ctx.fillText('YOUR', 96, 80);
  ctx.fillStyle = "#00CED1";
  ctx.translate(400, -10);
  ctx.rotate(90 * Math.PI / 180);
  ctx.fillStyle = "#00CED1";
  ctx.fillRect (110, 110, 200, 200);
  ctx.clearRect(115,115,190,190);
  ctx.fillStyle = "#191970";
  ctx.font = 'italic bold 70px  fangsong cursive';
  ctx.fillText('LOGO', 110, 90);
  ctx.fillStyle = '#6A5ACD';
  ctx.fillRect (120, 120, 180, 180);
  ctx.clearRect(125,125,170,170);
  ctx.fillStyle = '#00CED1';
  ctx.fillRect (130, 130, 160, 160);
  ctx.clearRect(135,135,150,150);
  ctx.fillStyle = '#6A5ACD';
  ctx.fillRect (140, 140, 140, 140);
  ctx.clearRect(145,145,130,130);
  ctx.fillStyle = '#00CED1';
  ctx.fillRect (150, 150, 120, 120);
  ctx.clearRect(155,155,110,110);
  ctx.fillStyle = '#6A5ACD';
  ctx.fillRect (160, 160, 100, 100);
  ctx.clearRect(165,165,90,90);
  ctx.fillStyle = '#00CED1';
  ctx.fillRect (170, 170, 80, 80);
  ctx.clearRect(175,175,70,70);
  ctx.fillStyle = '#6A5ACD';
  ctx.fillRect (180, 180, 60, 60);
  ctx.clearRect(185,185,50,50);
  ctx.fillStyle = '#00CED1';
  ctx.fillRect (190, 190, 40, 40);
  ctx.clearRect(195,195,30,30);
  ctx.fillStyle = '#6A5ACD';
  ctx.fillRect (200, 200, 20, 20);
  ctx.clearRect(215,215, 0, 0);
  ctx.fillStyle = '#00CED1';
}

}
</script>

</body>
</html>
